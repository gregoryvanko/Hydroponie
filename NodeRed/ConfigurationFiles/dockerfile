#FROM nodered/node-red:latest
#RUN npm install node-red-contrib-ds18b20
#RUN npm install node-red-node-pisrf
#RUN npm install node-red-node-pi-gpio
#RUN npm install node-red-dashboard
#USER root
#RUN apk add --update --no-cache python3 py3-pip && ln -sf python3 /usr/bin/python
#RUN apk add py3-rpigpio
#USER node-red


FROM nodered/node-red-docker:rpi
USER root

#update cache
RUN apt-get update

# Install python and dependencies
RUN apt-get install -y \
    build-essential \
    python \
    python-dev \
    python-pip \
    python-virtualenv \
    python3-RPi.GPIO \
    --no-install-recommends && \
    rm -rf /var/lib/apt/lists/*

# Install python rpi - TODO find way to install documentation
#RUN pip install RPi.GPIO

WORKDIR /usr/src/node-red
USER node-red
RUN npm install node-red-contrib-ds18b20
RUN npm install node-red-node-pisrf
RUN npm install node-red-node-pi-gpio
RUN npm install node-red-dashboard
